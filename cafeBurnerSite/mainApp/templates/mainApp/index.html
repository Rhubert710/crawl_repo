<!DOCTYPE html>
<html lang="en">
<head>
    
    <title>CRAWL-NYC</title>
    <meta name="description" content="Find things to do this weekend in nyc, in all five boroughs. Events in Brooklyn, Manhattan, Queens, Staten Island, the Bronx, and NJ. promote restaurants in New York City">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="site" content="us-newyork">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <!-- <script src="https://kit.fontawesome.com/a2fdac4b18.js" crossorigin="anonymous"></script> -->
    
    <!-- <link rel="stylesheet" href="gg.css"> -->

</head>
<body onload="onLoadFunction()" style="display:none;">

    <div id="bodyDiv">
      <!-- leftPanel start -->
      <section id="leftPanel">
  
        <!-- mainLogo -->
        <div>
            {% load static %}
            <img id = "mainLogo" src="{% static '/mainApp/clop.webp' %}" alt="cafeLogo">
        </div>

        <div id="border" ></div>

                  <!-- boroBar_left -->
                  <div id="boroBar_left" >
                    <div id="boros_left">
                          <button type="button" value="flyer" class="borobtn borobtn_desk active current_boro">&nbsp;All&nbsp;</button>
                          <button type="button" value="brooklyn" class="borobtn borobtn_desk">Brooklyn</button>
                          <button type="button" value="queens" class="borobtn borobtn_desk">Queens</button>
                          <button type="button" value="manhattan" class="borobtn borobtn_desk">Manhattan</button>                      <!-- </div>
                      <div class="btn-group_left" role="group"> -->
                          
                          <button type="button" value="bronx" class="borobtn borobtn_desk">Bronx</button>
                          <button type="button" value="staten" class="borobtn borobtn_desk">Staten Island</button>


                    </div>
                </div>
                <div id="a"><p></p></div>
                <!-- weekBar_left -->
              <!-- <div id="weekBar_left" >
                
                <button type="button" value="flyer" class="btn btn-dark weekday_button btn-sm active current_day">All</button>
                <button type="button" value="Thursday" class="btn btn-dark weekday_button btn-sm">Thursday</button>
                <button type="button" value="Friday" class="btn btn-dark weekday_button btn-sm">Friday</button>
                <button type="button" value="Saturday" class="btn btn-dark weekday_button btn-sm">Saturday</button>
                <button type="button" value="Sunday" class="btn btn-dark weekday_button btn-sm">Sunday</button>
               
          </div> -->
          <div  id="weekBar_desk">
                
            <button type="button" value="flyer" class="weekbtn_desk weekday_button btn-sm current_day">&nbsp;All&nbsp;</button>
            <button type="button" value="Thursday" class="weekbtn_desk weekday_button ">Thursday</button>
            <button type="button" value="Friday" class="weekbtn_desk weekday_button btn-sm">Friday</button>
            <button type="button" value="Saturday" class="weekbtn_desk weekday_button btn-sm">Saturday</button>
            <button type="button" value="Sunday" class="weekbtn_desk weekday_button btn-sm">Sunday</button>
           
      </div>
          <!-- flterBarDiv -->
          <div id="filterBarDesk">
                
                    <div id="filter-options-Desktop">

                        <div class="check_option" onclick="expandCollapse(this)"><div class="expand_symbol">+</div><div class="filter_text_desk" >Live Music</div></div>
                                <ul class="nest">
                                    <div class="check_option" onclick="check(this)" data-value="rock"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Rock</div></div>
                                    <div class="check_option" onclick="check(this)" data-value="hipHop"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  HipHop</div></div>
                                    <div class="check_option" onclick="check(this)" data-value="dance"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Dance</div></div>
                                    <div class="check_option" onclick="check(this)" data-value="other"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Other</div></div>
                                </ul>

                        <div class="check_option" onclick="check(this)" data-value="comedy"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Comedy</div></div>
                        <div class="check_option" onclick="check(this)" data-value="food"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Food</div></div>
                        <div class="check_option" onclick="check(this)" data-value="drinks"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Drinks</div></div>
                        <div class="check_option" onclick="check(this)" data-value="outdoor"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Outdoor</div></div>
                        <div class="check_option" onclick="check(this)" data-value="community"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Community</div></div>
                        <div class="check_option" onclick="check(this)" data-value="class"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Class / Info</div></div>
                        <div class="check_option" onclick="check(this)" data-value="athletic"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Athletic</div></div>
                        <div class="check_option" onclick="check(this)" data-value="sports"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Sports</div></div>
                        <div class="check_option" onclick="check(this)" data-value="seasonal"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text_desk" >  Seasonal</div></div>
                            
                        <!-- <br> -->
                        <div class="check_option showingAll showAll_button" style="transform:translateX(-29px);" onclick="showAll(this)" ><img class="refresh_symbol_desk" src="{% static '/mainApp/refresh.webp' %}" alt="refresh_symbol"><div class="filter_text_desk" style="font-size: 1.29rem;padding-left: 7px;">Clear Filters</div></div>
                    </div>
                    <!-- <div id="blank-space"></div> -->
            
                    <!-- <form>

                        <input type="checkbox" onclick="check(this)" id="live_music_checkbox" class="filter_text" name="live_music_checkbox" value="rock">
                        <label for="live_music_checkbox" class="filter_text"> Live Music</label><br>
                        <input type="checkbox" onclick="check(this)" id="Comedy_checkbox" class="filter_text" name="Comedy_checkbox" value="comedy">
                        <label for="Comedy_checkbox" class="filter_text"> Comedy</label><br>
                        <input type="checkbox" onclick="check(this)" id="Food_checkbox" class="filter_text" name="Food_checkbox" value="food">
                        <label for="Food_checkbox" class="filter_text"> Food/Drink</label><br>
                        <input type="checkbox" onclick="check(this)" id="Seasonal_checkbox" class="filter_text" name="Seasonal_checkbox" value="seasonal">
                        <label for="Seasonal_checkbox" class="filter_text"> Seasonal</label><br>
                    </form> -->


                </div>
            <!-- buttonsBottom -->
            <footer id="buttonsBottom" >
                <!-- <button id="myRemindersButton_desk" type="button" class="btn btn-info btn-lg bottomLeftButton" data-toggle="modal" data-target="#emailModal"><i class="bi bi-alarm"></i>&nbsp;
                        My Reminders</button> -->
                        <button id="myRemindersButton_desk" type="button" class="btn btn-info bottomLeftButton bottomButtonDesk btn-sm" onclick="myRemindersButton_click()"><i class="bi bi-alarm"></i>&nbsp;
                            My Reminders</button>
                    <!-- <button id="postFlyerButton_desk" type="button" class="btn btn-warning btn-lg bottomLeftButton" onclick="getFlyers()">post Flyer </button> -->
                        <a id="postFlyerButton_desk" class="btn btn-warning bottomLeftButton bottomButtonDesk btn-sm" href="/uploadImage" role="button">
                            Post Flyer</a>
            <a style="margin-left: auto;margin-right: auto;" href="/about">Help / About</a>
            </footer>
        
      </section>
      <!-- END leftPanel -->
  
      <!-- mainPanel start -->
      <section id="mainPanel" >
  
          <!-- mobileLogo -->
          <div id="mobileLogoDiv">
            {% load static %}
            <img id = "mobileLogo" src="{% static '/mainApp/mobile_logo.webp' %}"  alt="cafeLogo"><!--width="159" height="400"-->
            </div>
          
  
          <!-- boroBar -->
          <div id="boroBar" >
             
              <div id="boros">
                
                <div id="boro-btn-group-mobile" class="btn-group" role="group">
                    <button type="button" value="flyer" class="btn btn-dark btn-sm borobtn active current_boro">All</button>
                    <button type="button" value="brooklyn" class="btn btn-dark btn-sm borobtn">Brooklyn</button>
                    <button type="button" value="queens" class="btn btn-dark btn-sm borobtn">Queens</button>
                    <button type="button" value="manhattan" class="btn btn-dark btn-sm borobtn">Manhattan</button>
                    <button type="button" value="bronx" class="btn btn-dark btn-sm borobtn">Bronx</button>
                    <button type="button" value="staten" class="btn btn-dark btn-sm borobtn" style="width: 34px;">SI</button>
                  </div>    
              </div>
          </div>
          <!-- blogDiv -->
          <!-- <div id="blogDiv" > -->
              <!-- weekBar -->
              <div id="weekBar" >

                <button type="button" value="flyer" class="btn btn-dark weekday_button btn-sm active current_day">All</button>
                <button type="button" value="Thursday" class="btn btn-dark weekday_button btn-sm">Thursday</button>
                <button type="button" value="Friday" class="btn btn-dark weekday_button btn-sm">Friday</button>
                <button type="button" value="Saturday" class="btn btn-dark weekday_button btn-sm">Saturday</button>
                <button type="button" value="Sunday" class="btn btn-dark weekday_button btn-sm">Sunday</button>
                    
              </div>
              <!-- blog -->

                <div id="blog" >
                    <div id="side-bar-mobile">
                        <!-- <div id="mobileLogoDiv">
                            <img id="mobileLogo" src="cafeLogo.png" alt="mobileLogo">
                          </div> -->
                        <button id="filterButton" type="button" class="btn btn-dark" onclick="toggleSideBar(this)" aria-label="show menu button"><i class="bi bi-list"></i></button>
                          <div id="mobile-side-bar-inner">

                            <div id="mobile-sort-div" style="display:none;">

                                <div class="check_box" id="sortAddress_checkbox">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> <div class="sortOption">Sort by Nearest</div>
                                <input type="text" id="address_input">

                            </div>

                            <div id="filter-options-mobile">

                                <div onclick="expandCollapse(this)"><div class="expand_symbol">+</div><div class="filter_text" >Live Music</div></div>
                                        <ul class="nest">
                                            <div class="check_option" onclick="check(this)" data-value="rock"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" > Rock</div></div>
                                            <div class="check_option" onclick="check(this)" data-value="hipHop"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  HipHop</div></div>
                                            <div class="check_option" onclick="check(this)" data-value="dance"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  Dance</div></div>
                                            <div class="check_option" onclick="check(this)" data-value="other"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  Other</div></div>
                                        </ul>

                                        <div class="check_option" onclick="check(this)" data-value="comedy"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  Comedy</div></div>
                                        <div class="check_option" onclick="check(this)" data-value="food"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  Food</div></div>
                                        <div class="check_option" onclick="check(this)" data-value="drinks"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  Drinks</div></div>
                                        <div class="check_option" onclick="check(this)" data-value="outdoor"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  Outdoor</div></div>
                                        <div class="check_option" onclick="check(this)" data-value="community"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  Community</div></div>
                                        <div class="check_option" onclick="check(this)" data-value="class"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  Class / Info</div></div>
                                        <div class="check_option" onclick="check(this)" data-value="athletic"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  Athletic</div></div>
                                        <div class="check_option" onclick="check(this)" data-value="sports"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  Sports</div></div>
                                        <div class="check_option" onclick="check(this)" data-value="seasonal"><div class="check_box">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="filter_text" >  Seasonal</div></div>
                                    
                                <br>
                                <div class="check_option showingAll showAll_button" style="transform:translateX(-29px);" onclick="showAll(this)" ><img class="refresh_symbol" src="{% static '/mainApp/refresh.webp' %}" alt="refresh_symbol"><div class="filter_text" >  Clear Filters</div></div>
                                <!-- <div class="check_box" style="background: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> -->
                            </div>
                            <!-- <div id="blank-space"></div> -->
                            <!-- bottom buttons -->
                            <div id = "buttonsBottomLeft">
                                <!-- <button id="myRemindersButton_mobile" type="button" class="btn btn-info btn-lg bottomLeftButton" data-toggle="modal" data-target="#emailModal"><i class="bi bi-alarm"></i>&nbsp;
                                     My Reminders</button> -->
                                     <button id="myRemindersButton_mobile" type="button" class="btn btn-info bottomLeftButton btn-sm" onclick="myRemindersButton_click()"><i class="bi bi-alarm"></i>&nbsp;
                                        My Reminders</button>
                                <!-- <button id="postFlyerButton_mobile" type="button" class="btn btn-warning bottomLeftButton" onclick="getFlyers()">post Flyer </button> -->
                                    <a id="postFlyerButton_mobile" class="btn btn-warning bottomLeftButton btn-sm" href="/uploadImage" role="button">
                                        Post Flyer</a>
                                    
                                    <a style="margin-left: auto;margin-right: auto;" href="/about">Help / About</a>
                            </div>
                        </div>
                            
                    </div>
                <!-- <div id="blog-inne" >
                
                </div> -->


                <!-- <div id="blog-inner" > -->

                    <!-- <div id="desk_sort_div">
                        <input type="text" id="address_input_desk">
                    </div> -->

                  <div id="no_result_div" class="no_results_text" style="display:none;">No Results</div>

                  <div id="no_reminders_div" class="no_results_text" style="display:none;">
                    <i class="bi bi-alarm"></i> No Upcoming Reminders</div>

                <div id="mobile_top_buffer_div"></div>

                  <!-- <div class="flyer-div flyer Brooklyn comedy Friday">
                      <img class = "flyer-img" src="dummyFlyer1.png" alt="flyer1">
                      <div class="flyer-buttons">
                          <i class="bi bi-alarm" onclick="watch(this)"></i>
                          <br><i class="bi bi-three-dots-vertical"></i>
                      </div>
                  </div> -->

                  {% for event in flyerList reversed %}
                  
                  <div class="flyer-div flyer {{event.Flyer.Boro}} {{event.Flyer.Event_type}} {{event.Day_of_week}}" data-md5 = {% if event.Flyer.Flyer_image.Hash %}"{{event.Flyer.Flyer_image.Hash}}" {% else %} "{{event.Flyer.Flyer_image.Img_src_url}}" {% endif %} data-orientation ="{{event.Flyer.Flyer_image.Orientation}}" data-latt="{{event.Flyer.Lattitude}}" data-long="{{event.Flyer.Longitude}}" data-distance="">
                      
                        <img class = "flyer-img" data-flyer_id = "{{event.pk}}" onclick="toggleMoreInfo(this)"
                            src={% if event.Flyer.Flyer_image.Flyer_image %}"/media/{{event.Flyer.Flyer_image.Flyer_image}}" {% else %} "{{event.Flyer.Flyer_image.Img_src_url}}" {% endif %} alt="things to do in NYC {{event.Flyer.Event_type}} {{event.Flyer.Boro}} {{event.Day_of_week}}"> <!-- double brackets here are the first thing to go to improving performance -->

                        <div class="flyer-buttons">
                            <i class="bi bi-alarm flyerAlarm" data-value="{{event.Flyer.pk}}" onclick="watch(this)"></i>
                            <i class="bi bi-three-dots-vertical" data-f = "k" data-flyer_id = "{{event.pk}}" onclick="toggleMoreInfo(this)"></i>
                        </div>
                    </div>
                        <!-- more info -->
                        <div id="more_info_{{event.pk}}" class="moreInfo flyer {{event.Flyer.Boro}} {{event.Flyer.Event_type}} {{event.Day_of_week}}" >
                            <p></p><!--Contact Info:-->                <!--  if statemnt for email "mailto:" (all INLINE to avoid bugs)-->
                           <div class="user_info">

                                <div class="tag_div"> <div class="type_tag">{{event.Flyer.Event_type}}</div> <div class="boro_tag">{{event.Flyer.Boro.capitalize}}</div> <div class="distance_tag" style="margin-left: auto;">{{event.Flyer.pk}}</div> </div>
                                <div class="event_description" data-flyer_id = "{{event.pk}}" onclick="toggleMoreInfo(this)">{{event.Flyer.Description}}</div>
                                <div style="font-family: comicy;font-weight: bolder;">full Description / tickets / RSVP : </div>
                                <div class="scroll_behind_padding">
                                  <a class="link" href="{% if '@' in  event.Flyer.Contact_information %}mailto:{% endif %}{% if '@' not in event.Flyer.Contact_information and '://' not in event.Flyer.Contact_information %}http://{% endif %}{{event.Flyer.Contact_information}}" target="_blank"> {{event.Flyer.Contact_information}}</a><!-- {% if '@' not in flyer.Contact_information and 'www' not in flyer.Contact_information %}www.{% endif %} -->
                                </div>
                            </div> 
                            <p></p><!--Address:-->
                            <div class="user_info scroll_behind_padding">
                              <a class="link" href="http://maps.google.com/?q={{event.Flyer.Address}}" target="_blank"> {{event.Flyer.Address}}</a>
                            </div>
                        </div>
                        
                 
                    <div id="more_info_desk{{event.pk}}" class="moreInfo_desk">

                        <div class="moreInfo_desk_close_text" onclick="toggle_moreInfo_desk(document.querySelector('.selected_flyer_desk'))"><< close</div>

                        <div class="moreInfo_desk_img_div">
                            <img class = "moreInfo_desk_img" src={% if event.Flyer.Flyer_image.Flyer_image %}"/media/{{event.Flyer.Flyer_image.Flyer_image}}" {% else %} "{{event.Flyer.Flyer_image.Img_src_url}}" {% endif %} 
                                alt="things to do in NYC {{event.Flyer.Event_type}} {{event.Flyer.Boro}} {{event.Day_of_week}}"> 
                        </div>

                        <div class="moreInfo_desk_text_div">

                            <div class="moreInfo_desk_userInfo">

                                <div class="tag_div_desk"> <span class="type_tag">{{event.Flyer.Event_type}}</span> <span class="boro_tag">{{event.Flyer.Boro.capitalize}}</span> </div>
                                <div class="event_description_desk">{{event.Flyer.Description}}</div>
                                <div style="font-family: comicy;font-weight: bolder;">full Description / tickets / RSVP : </div>
                                <div class="scroll_behind_padding">
                                  <a class="link" href="{% if '@' in  event.Flyer.Contact_information %}mailto:{% endif %}{% if '@' not in event.Flyer.Contact_information and '://' not in event.Flyer.Contact_information %}http://{% endif %}{{event.Flyer.Contact_information}}" target="_blank"> {{event.Flyer.Contact_information}}</a><!-- {% if '@' not in flyer.Contact_information and 'www' not in flyer.Contact_information %}www.{% endif %} -->
                                </div>

                            </div>

                            <div class="moreInfo_desk_address">
                                <a class="link" href="http://maps.google.com/?q={{event.Flyer.Address}}" target="_blank"> {{event.Flyer.Address}}</a>
                            </div>
                        </div>

                    </div>
                <!-- <p style="color: #F76F07;">{{flyer.dayOfWeek}}</p> -->
                  {% endfor %}
                <!-- </div> -->
                  <!-- <div class="flyer-div flyer Queens rock music Saturday"><img class = "flyer-img" src="dummyFlyer2.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer stni rock show Saturday"><img class = "flyer-img" src="dummyFlyer7.jpeg" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer Nassau food Sunday"><img class = "flyer-img " src="DummyFlyer4.jpeg" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn rock Saturday"><img class = "flyer-img" src="dummyFlyer8.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn food Saturday"><img class = "flyer-img" src="/media/flyer_imgs/dummyFlyer0.png" alt="fuck"><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn comedy Friday"><img class = "flyer-img" src="dummyFlyer1.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn rock Saturday"><img class = "flyer-img" src="dummyFlyer8.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn comedy Saturday"><img class = "flyer-img" src="dummyFlyer11.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn rock Saturday"><img class = "flyer-img" src="dummyFlyer8.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn comedy Saturday"><img class = "flyer-img" src="dummyFlyer11.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn rock Saturday"><img class = "flyer-img" src="dummyFlyer8.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn comedy Saturday"><img class = "flyer-img" src="dummyFlyer11.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn rock Saturday"><img class = "flyer-img" src="dummyFlyer8.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn comedy Saturday"><img class = "flyer-img" src="dummyFlyer11.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn rock Saturday"><img class = "flyer-img" src="dummyFlyer8.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn comedy Saturday"><img class = "flyer-img" src="dummyFlyer11.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer brooklyn rock Saturday"><img class = "flyer-img" src="dummyFlyer8.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>
                  <div class="flyer-div flyer Brooklyn comedy Saturday"><img class = "flyer-img" src="dummyFlyer11.png" alt=""><div class="flyer-buttons"><i class="bi bi-alarm" onclick="watch(this)"></i></div></div>

                  <i class="fas fa-plus-circle fa-4x newPostIcon"></i> -->
              
              
          </div>
          <!-- end blogDiv-->
          
      </section>
      <!-- END mainPanel -->
    <!-- Modal -->
    <div class="modal fade" id="emailModal" tabindex="-1" role="dialog" aria-labelledby="emailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
            <!-- <div class="modal-header">
                <h5 class="modal-title" id="emailModalLabel">Login</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" style="font-size: 80%;">&times;</span>
                </button>
            </div> -->
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" style="font-size: 80%;">&times;</span>
                </button>
                <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button> -->
               <br><p id="emailModalText"> Enter your email to see all the events your watching.  We can send you a weekly email to remind you of upcoming events your watching <br></p>
                <label for="emailField">email:</label>
                <input type="email" id="emailField" name="emailField" autocomplete="on">
                <p id="emailErrorText" style="color: crimson; font-style: italic; display: none;">
                    *Please enter a valid email address</p>
            </div>
            <div class="modal-footer" style="height: 5px;">
                <button type="button" class="btn btn-sm btn-secondary"data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-sm btn-primary" id="email_modal_ok">OK</button>
            </div>
        </div></div></div>
    </div>

    <!-- // successful post modal //-->
    <div id="success_modal" style="display: none;">
        <h5 style="text-align: center;">Your Flyer Successfully Posted!</h5>
        <div id="modal_line"></div>
        <p>If your dont see your flyer, It is beacuse only flyers for the <i>upcoming</i> weekend are displayed.  
            <br> So, if your event is two weeks from now, vistors will be able to see your flyer <i>after</i> this weekend.
            <br> If you have any other questions, feel free to contact us: <a href="mailto">r@cafe.com</a></p>

            <button id="success_modal_btn" onclick="(function()
                {success_modal.style['display']='none'})();">ok</button>
    </div>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD8PojGK5wFPCE1Hzv3kQiEkKc2KaeFeP4&libraries=places&callback=initMap&solution_channel=GMP_QB_addressselection_v1_cA" async defer></script>

</body>
</html>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<!-- <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script> -->
<script src="https://code.jquery.com/jquery-3.6.1.slim.js" integrity="sha256-tXm+sa1uzsbFnbXt8GJqsgi2Tw+m4BLGDof6eUPjbtk=" crossorigin="anonymous"></script>
<!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">


<!-- {{ moreInfo_data|json_script:"moreInfo_data" }} -->
<script type="text/javascript">

    //variables

    var current_user_email = "null";
    var csrftoken = getCookie('csrftoken');

    let flyers = document.getElementsByClassName("flyer-div");

    let moreInfo_divs = document.getElementsByClassName("moreInfo");
    let prev_firstFlyer;
    // const moreInfo_data =  JSON.parse(document.getElementById('moreInfo_data').textContent);

    // const size = new TextEncoder().encode(JSON.stringify(moreInfo_divs)).length;
    // const sizeq = new TextEncoder().encode(JSON.stringify(moreInfo_data)).length
    // const kiloBytes = size / 1024;
    // const kiloBytesq = sizeq / 1024;

    // console.log(kiloBytes);
    // console.log(kiloBytesq);

    // let blog = document.getElementById("blog");

    let screen_size = window.innerWidth  < 1001 ? "mobile" : "laptop";

    filter(); //to remove duplicte Flyers on load

    //on screen change
    window.addEventListener('resize', function(event){

        set_moreInfo_toggle_type();
        filter();

    });

    // boro Bar Logic
    $('.borobtn').click(function()
        {
            $('.borobtn').removeClass('active');
            $('.borobtn').removeClass('current_boro');
            $(this).addClass('active');
            $(this).addClass('current_boro');
            
            filter()
        });
    
    // week Bar Logic
    $('.weekday_button').click(function()
    {
        $('.weekday_button').removeClass('active');
        $('.weekday_button').removeClass('current_day');
        $(this).addClass('active');
        $(this).addClass('current_day');
        
        filter()
    });

    // check box Logic

    function expandCollapse(x)
    {  
        var thisNest = x.nextElementSibling

        if (thisNest.style["display"] == "" || thisNest.style["display"] == "none")
        {
            // console.log(thisNest)
            
            //show nest
            thisNest.style["display"] = "block";
            x.firstChild.innerHTML = "-";

            //select all options in nest when expanded(if none are already selected)
            // let nodes = thisNest.children
            // let anyAlreadyChecked = false;
            // for(var i=0; i < nodes.length; i++) {
            //     if(nodes[i].classList.contains("checked")){anyAlreadyChecked=true}
            // }
            // if(anyAlreadyChecked){return}
            // else
            // {
            //     for(var i=0; i < nodes.length; i++) {
            //         // console.log(nodes[i]);
            //         // nodes[i].click();
            //         check(nodes[i]);
            //     }
            // }
        }
        else{
            thisNest.style["display"] = "none";
            x.firstChild.innerHTML = "+";}
        // console.log(x.nextElementSibling)
    }

    function check(x){

        //turn off "show all" button
        let showAllButton = document.getElementsByClassName("showAll_button")

        for (i = 0; i < showAllButton.length; i++) 
        {
            showAllButton[i].classList.remove("showingAll");
        }


        // console.log(x.value)
        if(x.classList.contains("checked"))
        {
            x.classList.remove("checked");
            x.firstChild.style.background = "white";
        }
        else{
            console.log("added checked");
            x.classList.add("checked");
            x.firstChild.style.background = "black";
        }
        
        // console.log( x.nextElementSibling);
        filter();
    }
    function getCookie(name) 
    {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    function showAll(x)
    {

        // if(x.classList.contains("showingAll"))
        // {
        //    x.classList.remove("showingAll");
        // }
        // else
        // {
            //uncheck all other options
            var check_options = document.getElementsByClassName("check_option")

            for (i = 0; i < check_options.length; i++)
            {
                check_options[i].firstChild.style["background-color"] = "white";
                check_options[i].classList.remove("checked");
            }

            // x.classList.add("showingAll");
            filterBarDesk.scrollTop = 0;

            //filter
            filter();

            //collapse open nests
            let nests = document.getElementsByClassName("nest")
            for (i = 0; i < nests.length; i++) 
            {
                nests[i].style["display"] = "none"
            }
            document.querySelectorAll('.expand_symbol').forEach((symbol) => {symbol.innerHTML = "+";});
        // }
    }

    // filter_func
    function filterOLD() {
        
        $('.flyer').show("slow");
        
        var actives = document.getElementsByClassName("active");
        var checked = document.getElementsByClassName("checked");
        var flyers = document.getElementsByClassName("flyer");
        var blog = document.getElementById("blog");
        
        blog.scrollTop = 0;

        for (i = 0; i < actives.length; i++) {
            for (j = 0; j < flyers.length; j++) 
            {
                if (flyers[j].classList.contains(actives[i].value) == false)
                {
                        flyers[j].style.display ="none";
                }
            }
        }

        for (i = 0; i < checked.length; i++) {
            for (j = 0; j < flyers.length; j++) 
            {

                if (i==0 && flyers[j].classList.contains(checked[i].value) == false)
                {
                        flyers[j].style.display = "none";
                }
                if (i!=0 && flyers[j].classList.contains(checked[i].value) == true && flyers[j].style.display =="none")
                {
                        flyers[j].style.display ="block";
                }
            }
        }
    
    // console.log(blog.scrollTop)
    }

    function filter_stable() {
        
        let boro = document.getElementsByClassName("current_boro");
        let day = document.getElementsByClassName("current_day");

        let checked = document.getElementsByClassName("checked");

        // blog.scrollTop = 0; //smooth scroll moved to bottom
        
        if (sb.classList.contains('open')){toggleSideBar();}

        mobile_top_buffer_div.style['height']='50px';

        mobile_top_buffer_div.addEventListener("transitionend", (ev) => {
            mobile_top_buffer_div.style['height']='0px';}, true);

        // document.querySelectorAll('.flyer').forEach((flyer) => {flyer.style['display']='none'});
        // document.querySelectorAll('.more').forEach((flyer) => {flyer.style['display']='none'});

        for (let i = 0; i < flyers.length; i++) 
        {

            flyers[i].style['display']='none';
            moreInfo_divs[i].style['display']='none';

        }
        
        // collapse moreInfo divs mobile / laptop
        for (let i = 0; i < moreInfo_divs.length; i++) {

            if(moreInfo_divs[i].classList.contains('moreInfo_open')){
                toggleMoreInfo(moreInfo_divs[i].children[1].children[1]);}

        }

        let open_desk_element = document.querySelector('.selected_flyer_desk');
        if(open_desk_element) toggle_moreInfo_desk(open_desk_element);
        

        no_result_div.style['display'] = 'none';
        no_reminders_div.style['display']='none';

        let no_Results = true;


        let hash_list = [];

        if (checked.length > 0)
        {
            for (i = 0; i < flyers.length; i++){
                for (j = 0; j < checked.length; j++)
                {
                    if(flyers[i].classList.contains(boro[0].value) &&
                        flyers[i].classList.contains(day[0].value) &&
                        flyers[i].classList.contains(checked[j].dataset.value) &&
                        !hash_list.includes(flyers[i].dataset.md5))
                    {
                        flyers[i].style.display ="flex";
                        moreInfo_divs[i].style.display ="flex";

                        hash_list.push(flyers[i].dataset.md5)
                        no_Results = false;
                    }
                }
            }
        }

        if (checked.length == 0)
        {
            for (i = 0; i < flyers.length; i++){
                if(flyers[i].classList.contains(boro[0].value) &&
                    flyers[i].classList.contains(day[0].value) &&
                    !hash_list.includes(flyers[i].dataset.md5))
                {
                    flyers[i].style.display ="flex";
                    moreInfo_divs[i].style.display ="flex";

                    hash_list.push(flyers[i].dataset.md5)
                    no_Results=false;
                }
            }
        }

        blog.scrollTo({top: 0, behavior: 'smooth'});

        if(no_Results)
            {no_result_div.style['display'] = 'block';}
    }

    function filter() {
        
        let boro = document.getElementsByClassName("current_boro");
        let day = document.getElementsByClassName("current_day");
        let first;
        let checked = document.getElementsByClassName("checked");
        let sb = document.getElementById('side-bar-mobile');

        // blog.scrollTop = 0; //smooth scroll moved to bottom
        
        if (sb.classList.contains('open')){toggleSideBar();}

        // document.querySelectorAll('.flyer').forEach((flyer) => {flyer.style['display']='none'});
        // document.querySelectorAll('.more').forEach((flyer) => {flyer.style['display']='none'});

        for (let i = 0; i < flyers.length; i++) 
        {

            flyers[i].style['display']='none';
            moreInfo_divs[i].style['display']='none';

            flyers[i].style['height'] = 'auto';

        }
        
        // collapse moreInfo divs mobile / laptop
        for (let i = 0; i < moreInfo_divs.length; i++) {

            if(moreInfo_divs[i].classList.contains('moreInfo_open')){
                toggleMoreInfo(moreInfo_divs[i].children[1].children[1]);}

        }

        let open_desk_element = document.querySelector('.selected_flyer_desk');
        if(open_desk_element) toggle_moreInfo_desk(open_desk_element);
        

        no_result_div.style['display'] = 'none';
        no_reminders_div.style['display']='none';

        let no_Results = true;


        let hash_list = [];

        if (checked.length > 0)
        {
            for (i = 0; i < flyers.length; i++){
                for (j = 0; j < checked.length; j++)
                {
                    if(flyers[i].classList.contains(boro[0].value) &&
                        flyers[i].classList.contains(day[0].value) &&
                        flyers[i].classList.contains(checked[j].dataset.value) &&
                        !hash_list.includes(flyers[i].dataset.md5))
                    {
                        flyers[i].style.display ="flex";
                        moreInfo_divs[i].style.display ="flex";

                        hash_list.push(flyers[i].dataset.md5)
                        no_Results = false;
                    }
                }
            }
        }

        if (checked.length == 0)
        {
            for (i = 0; i < flyers.length; i++){
                if(flyers[i].classList.contains(boro[0].value) &&
                    flyers[i].classList.contains(day[0].value) &&
                    !hash_list.includes(flyers[i].dataset.md5))
                {
                    flyers[i].style.display ="flex";
                    moreInfo_divs[i].style.display ="flex";

                    hash_list.push(flyers[i].dataset.md5)
                    no_Results=false;
                }
            }
        }

        blog.scrollTo({top: 0, behavior: 'smooth'});
        // $('#blog').animate({
        //                 scrollTop: 0
        // }, 299);

        //FORMAT LAYOUT FOR DESK
        if (window.innerWidth >= 712) format_layout_for_desk(); //added assign_last_in_row() INSIDE format_layout_for_desk()
        
        //(mobile only <for some reason>) 'buffer animation' (only if rirst result is same flyer)
        mobile_buffer_animation();

        //finally
        if(no_Results)
            {no_result_div.style['display'] = 'block';}

    }

//MOBILE BUFFER ANIMATION//
function mobile_buffer_animation(){

    let current_firstFlyer = (function(){for(let x of flyers){if(x.style['display'] == 'flex'){return x.dataset.md5; break}}})();

        if (prev_firstFlyer == current_firstFlyer){

            mobile_top_buffer_div.classList.add('buffer_animation');
            setTimeout(() => { mobile_top_buffer_div.classList.remove('buffer_animation') ;}, 501)
            
        }
        prev_firstFlyer = current_firstFlyer;
    
}

//FORMAT LAYOUT FOR DESK//
function format_layout_for_desk(){

        let l = [];
        for (let i of flyers){if(i.getAttribute('data-orientation')=='l' && i.style['display']=='flex'){i.removeAttribute('id'); l.push(i);}}

        let w = [];
        for (let i of flyers){if(i.getAttribute('data-orientation')=='w' && i.style['display']=='flex') {i.removeAttribute('id'); w.push(i);}}

        let q = [];
        for (let i of flyers){if(i.getAttribute('data-orientation')=='q' && i.style['display']=='flex') {i.removeAttribute('id'); q.push(i);}}

        let counter = 1;
        let row =1

        let isFlyers = true;


        while (isFlyers) 
        {

            let COLUMS = 2;

            if (l.length > COLUMS){
                for (let i = 0; i <= COLUMS; i++) {
                    
                    l[i].style['order'] = counter;
                    l[i].dataset['row'] = row;

                    if(i==COLUMS) {
                        l[i].setAttribute('id', `last_in_row_${row}`);

                        l[i].classList.add('last_in_row');
                        row++;counter++;}

                    counter ++;

                }
                for (let i = 0; i <= COLUMS; i++) {l.shift()}
                
            }

            if (l.length > COLUMS){
                for (let i = 0; i <= COLUMS; i++) {
                    
                    l[i].style['order'] = counter;
                    l[i].dataset['row'] = row;

                    if(i==COLUMS) {
                        l[i].setAttribute('id', `last_in_row_${row}`);

                        l[i].classList.add('last_in_row');
                        row++;counter++;}
                        
                    counter ++;

                }
                for (let i = 0; i <= COLUMS; i++) {l.shift()}
            }

            if (q.length > COLUMS){
                for (let i = 0; i <= COLUMS; i++) {
                    
                    q[i].style['order'] = counter;
                    q[i].dataset['row'] = row;

                    if(i==COLUMS) {
                        q[i].setAttribute('id', `last_in_row_${row}`);

                        q[i].classList.add('last_in_row');
                        row++;counter++;}
                        
                    counter ++;

                }
                for (let i = 0; i <= COLUMS; i++) {q.shift()}
            }
            if (w.length > COLUMS){
                for (let i = 0; i <= COLUMS; i++) {
                    
                    w[i].style['order'] = counter;
                    w[i].dataset['row'] = row;

                    if(i==COLUMS) {
                        w[i].setAttribute('id', `last_in_row_${row}`);

                        w[i].classList.add('last_in_row');
                        row++;counter++;}
                        
                    counter ++;

                }
                for (let i = 0; i <= COLUMS; i++) {w.shift()}
            }
            if (w.length > COLUMS){
                for (let i = 0; i <= COLUMS; i++) {
                    
                    w[i].style['order'] = counter;
                    w[i].dataset['row'] = row;

                    if(i==COLUMS) {
                        w[i].setAttribute('id', `last_in_row_${row}`);

                        w[i].classList.add('last_in_row');
                        row++;counter++;}
                        
                    counter ++;

                }
                for (let i = 0; i <= COLUMS; i++) {w.shift()}
            }

            //last of
            if(l.length<=COLUMS && w.length<=COLUMS && q.length<=COLUMS){

                for(let list of [l,w,q]){

                    for (let i=0; i< list.length; i++){

                        list[i].style['order'] = counter;
                        list[i].dataset['row'] = row;

                        list[i].style['height'] = 'fit-content'

                        if(i==COLUMS) {
                        list[i].setAttribute('id', `last_in_row_${row}`);

                        list[i].classList.add('last_in_row');
                        row++;counter++;}
                        
                    counter ++;
                    }
                }
                isFlyers = false;
            }
        }

        // assign_last_in_row()
    }
    
    
    function toggleSideBar(){

        // console.log("bb")
        let filterButton = document.getElementById("filterButton")

        if(filterButton.firstChild.classList.contains("bi-list"))
        {
            let sideBar =document.getElementById("side-bar-mobile");
                sideBar.style.width = "59%";
                sideBar.classList.add('open');
            let options =document.getElementById("filter-options-mobile");
                options.style["padding-left"] = "25%";
            let filter_btn_icon = filterButton.firstChild
                filter_btn_icon.classList.remove("bi-list");
                filter_btn_icon.classList.add("bi-chevron-double-left");
            filterButton.style["left"] = "100%";


            filterButton.style["background-color"] = "#1d2124";
            filterButton.style["border-color"] = "#171a1d";

            document.querySelector('#mobile-sort-div').style['display'] = 'block';
            buttonsBottomLeft.style['display'] = 'flex';

            // adding listener to flyer-div so user can click off and away mobile-side-bar
            // let currentFlyers = document.getElementsByClassName("flyer-div")
            for (let i = 0; i < flyers.length; i++) {
                flyers[i].addEventListener("click", toggleSideBar);
            }
            // blog-inner.addEventListener("click", toggleSideBar);no_results_text
            let no_results_text = document.getElementsByClassName("no_results_text")
            for (let i = 0; i < no_results_text.length; i++) {
                no_results_text[i].addEventListener("click", toggleSideBar);
            }
        }
        else{
            let sideBar = document.getElementById("side-bar-mobile");
                sideBar.style.width = "0px";
                sideBar.classList.remove('open')
            let options =document.getElementById("filter-options-mobile");
                options.style["padding-left"] = "0px";
            let filter_btn_icon = filterButton.firstChild
                filter_btn_icon.classList.remove("bi-chevron-double-left");
                filter_btn_icon.classList.add("bi-list");
            // filterButton.style["left"] = "105%";


            filterButton.style["background-color"] = "#343a40";
            filterButton.style["border-color"] = "#343a40";

            document.querySelector('#mobile-sort-div').style['display'] = 'none';
            buttonsBottomLeft.style['display'] = 'none';

            // removing listener to flyer-div
            // let currentFlyers = document.getElementsByClassName("flyer-div")
            for (var i = 0; i < flyers.length; i++) {
                flyers[i].removeEventListener("click", toggleSideBar);
            }
            let no_results_text = document.getElementsByClassName("no_results_text")
            for (var i = 0; i < no_results_text.length; i++) {
                no_results_text[i].removeEventListener("click", toggleSideBar);
            }
        }
    }

    function watch(x)
    {   
        if (current_user_email != "null")
        {
            // console.log(x.style["color"])
            // console.log()
            let flyer_id = x.dataset.value;
            

            if(x.style["color"] =="" || x.style["color"] =="rgb(240, 248, 255)")//watch
            {
                x.style["color"] ="#034694"//blue
                x.parentElement.parentElement.classList.add("watched");

                //ajax to update db
                var xhttp = new XMLHttpRequest();
                xhttp.open("POST", "/watchList"); 
                xhttp.setRequestHeader("Content-Type", "application/json");
                xhttp.setRequestHeader("X-CSRFToken", csrftoken);
                xhttp.onreadystatechange = function() 
                {
                    if (this.readyState == 4 && this.status == 200) 
                    {
                        // Response
                        var response = this.responseText;
                        console.log(response)
                    }
                }
                var data = {"email":current_user_email, "id":flyer_id, "func":"add"};
                console.log(data)
                xhttp.send(JSON.stringify(data));


                        
            }
            else//un-watch
            {
                x.style["color"] ="#f0f8ff"//white
                .parentElement.parentElement.classList.remove("watched");

                //ajax to DELETE from db
                var xhttp = new XMLHttpRequest();
                xhttp.open("POST", "/watchList"); 
                xhttp.setRequestHeader("Content-Type", "application/json");
                xhttp.setRequestHeader("X-CSRFToken", csrftoken);
                xhttp.onreadystatechange = function() 
                {
                    if (this.readyState == 4 && this.status == 200) 
                    {
                        // Response
                        var response = this.responseText;
                        console.log(response)
                    }
                }
                var data = {"email":current_user_email, "id":flyer_id, "func":"del"};
                console.log(data)
                xhttp.send(JSON.stringify(data));
            }
        }
        else//if current email == "null"
        {  
            $('#emailModal').modal('show');
            // keep working here.to handle alrm clock click new login
        }
    }
    function ValidateEmail(mail) 
    {
    if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(mail))
    {
        return (true)
    }
    //show error message
        document.getElementById("emailErrorText").style["display"] = "block";
        return (false)
    }

    function getFlyers()
    {   
        
        //get email IF there is none
        if (current_user_email == "null"){
            //vaildate email input
            new_email = document.getElementById("emailField").value
            if(ValidateEmail(new_email) == false) 
                {return}
        
            //if email is valid:
            current_user_email = new_email;
            localStorage.setItem('current_user_email', new_email);
        }
        //hide and reset modal
        $('#emailModal').modal('hide')
        document.getElementById("emailErrorText").style["display"] = "none";
        document.getElementById("emailField").value = ""

        if(filterButton.firstChild.classList.contains("bi-chevron-double-left"))
        {
            toggleSideBar();
        }

        //ajax to get the current users watched_flyerList
        url = "/watchList?useremail=" + current_user_email
        flyers = document.getElementsByClassName("flyerAlarm")

        console.log("clicked")
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", url);
       
        xhttp.onreadystatechange = function() 
        {
            const DONE = 4; // readyState 4 means the request is done.
            const OK = 200; // status 200 is a successful return.
            if (xhttp.readyState === DONE) {
                if (xhttp.status === OK) {
                // Response
                var response = JSON.parse(this.responseText);
                var watchedFlyers = response["flyers"]
                console.log(response)
                
                $(".flyer").hide();
                no_reminders_div.style['display']='none';

                let no_Results = true;
                for (i = 0; i < flyers.length; i++){
                    for (j = 0; j < watchedFlyers.length; j++)
                    {
                        if(flyers[i].dataset.value == watchedFlyers[j])
                        {
                            flyers[i].style["color"] ="#034694";//blue
                            flyers[i].parentElement.parentElement.style["display"] = "flex";
                            flyers[i].parentElement.parentElement.classList.add("watched");
                            no_Results = false;
                            // console.log (flyers[i].parentElement.parentElement);

                        }
                    }
                }
                blog.scrollTop = 0;
                if(no_Results){no_reminders_div.style['display']='block';}

                

            }
        }else {
			console.log('Error: ' + xhttp.status);}
            // alert("Sorry there was an error")
        }
        xhttp.send();

    }

    function myRemindersButton_click(){
        
        if (current_user_email != "null"){
            
            let flyers = document.getElementsByClassName("watched")

            $('.flyer').hide();
            for (i = 0; i < flyers.length; i++)
            {
                flyers[i].style["display"] = "flex";
            }
            
            if(filterButton.firstChild.classList.contains("bi-chevron-double-left"))
            {
                toggleSideBar();
            }

            blog.scrollTop = 0;
        }
        else
        $('#emailModal').modal('show');
    }

    // $('.bi-three-dots-vertical').on('click', function(evt) {
    //     $(this).children().slideDown(); // does not run a DOM query
    // }); 

    function toggleMoreInfo(thisElement)
    {

        // let flyer_id = thisElement.dataset.flyer_id;
        let moreInfo = document.querySelector(`#more_info_${thisElement.dataset.flyer_id}`);

        let children = moreInfo.children;
        let userInfo = moreInfo.getElementsByClassName("user_info");

        //set distance text
        // moreInfo.querySelector(".distance_tag").innerText = `${thisElement.parentElement.dataset.distance} mi`;

        //set css order + 1
        // if(thisElement.parentElement.style['order']) { moreInfo.style['order'] = ( parseInt(thisElement.parentElement.style['order']) + 1 )}

        if(!moreInfo.classList.contains('moreInfo_open')){

            moreInfo.classList.add('moreInfo_open')

            if(document.documentElement.clientWidth >=1000)
            {
                moreInfo.style["height"]= "150px";
                moreInfo.style["width"]= "900px";

            }
            else
            // moreInfo.style["height"]= "119px";
            {
                moreInfo.style["height"]= "18.5em";

            }
            
            moreInfo.style["bottom"]= "0%";
            moreInfo.style["margin-bottom"]= "2.5rem";

            children[0].innerHTML="Contact Info:";
            children[2].innerHTML="Address:";            

            // console.log(userInfo);

            // userInfo[0].style["transition"] = ".4s";
            // userInfo[1].style["transition"] = ".4s";

            userInfo[1].style["height"] = "2.48rem";
            userInfo[1].style["padding"] = ".6rem";
            userInfo[0].style["height"] = "10.26rem";
            userInfo[0].style["padding"] = ".6rem";

            // userInfo[0].style["width"] = "80vw";
            // userInfo[1].style["width"] = "80vw";
            // for(i=0; i<userInfo.length; i++)
            // {
            //     userInfo[i].style["padding"] = "2%";

            //     if(document.documentElement.clientWidth >=1000)
            //     {
            //     userInfo[i].style["height"] = "auto";
            //     }
            //     else
            //     {
            //         userInfo[i].style["height"] = "34px";
            //     }
            // }

            //make sure moe info div doesnt appear below viewable screen

            let rect = moreInfo.getBoundingClientRect();

            if(rect.bottom >=469 && document.documentElement.clientWidth >=1000){
                blog.scrollTop = moreInfo.offsetTop - 470;}

            // console.log(rect.bottom+','+document.documentElement.clientWidth)
        }
        else{

            moreInfo.classList.remove('moreInfo_open')

            moreInfo.style["transition"] ="0.29s";
            moreInfo.style["height"]= "0px";

            moreInfo.style["bottom"]= "10%";
            moreInfo.style["margin-bottom"]= "0rem";

            // children[0].innerHTML="\u00A0";  added to bottom to make animation look smoother
            // moreInfo.style["width"]= "0px";

            for(i=0; i<userInfo.length; i++){
                userInfo[i].style["transition"] = ".19s";
                userInfo[i].style["padding"] = "0px";
                userInfo[i].style["padding-left"] = "19%";
                userInfo[i].style["padding-right"] = "19%";
                // children[i].style["padding-top"] = "2%";
                
                userInfo[i].style["height"] = "0px";
                // userInfo[i].style["width"] = "78vw";

            }

            children[0].innerHTML="\u00A0";
            children[2].innerHTML="\u00A0";
        }

    }


//TOGGLE MORE INFO DESK
function toggle_moreInfo_desk(thisElement){

    let flyer_id = thisElement.dataset.flyer_id;
    let moreInfo = document.querySelector(`#more_info_desk${flyer_id}`);

    let last_element_in_row = find_last_in_row(thisElement.parentElement);
console.log(last_element_in_row);
    // const para = document.createElement("div");
    // para.innerHTML = `
    // gfyf

    // `;
    // para.style['width'] ='90%';
    // para.style['background-color'] ='blue';

    moreInfo.style['order'] = parseInt(last_element_in_row.style['order'])+1;
    // last_element_in_row.insertAdjacentElement('afterend', moreInfo);

    //open
    if(!thisElement.classList.contains('selected_flyer_desk')){

        thisElement.classList.add('selected_flyer_desk')
        moreInfo.classList.add('moreInfo_desk_open')

        // thisElement.style['borx'] = '5px solid chartreuse';

        thisElement.style['border'] = '1px solid black';
        thisElement.style['box-shadow'] = '0px 0px 10px 4px chartreuse';

        // moreInfo.style['display'] = 'flex'

        let offsetT_top = moreInfo.offsetTop;
        let five_vh = (5 * document.documentElement.clientHeight) / 100;

        blog.scrollTo({top: offsetT_top - five_vh, behavior: 'smooth'});

}


//close
else{

    thisElement.classList.remove('selected_flyer_desk')

    thisElement.style['border'] = 'none';
    thisElement.style['box-shadow'] = 'none';
    

    // moreInfo.style['display'] = 'none'
    moreInfo.classList.remove('moreInfo_desk_open')

    let offsetT_top = thisElement.offsetTop;
    let forty_vh = (40 * document.documentElement.clientHeight) / 100;

    blog.scrollTo({top: offsetT_top - forty_vh, behavior: 'smooth'});
}


}
    //TOGGLE MORE INFO DESK OLD
    function toggle_moreInfo_desk_old(thisElement){

        let flyer_id = thisElement.dataset.flyer_id;
        let moreInfo = document.querySelector(`#more_info_desk${flyer_id}`);


        //open
        if(!thisElement.classList.contains('selected_flyer_desk')){

            thisElement.classList.add('selected_flyer_desk')
            moreInfo.classList.add('moreInfo_desk_open')

            // thisElement.style['borx'] = '5px solid chartreuse';

            thisElement.style['border'] = '1px solid black';
            thisElement.style['box-shadow'] = '0px 0px 10px 4px chartreuse';

            // moreInfo.style['display'] = 'flex'

            let offsetT_top = moreInfo.offsetTop;
            let five_vh = (5 * document.documentElement.clientHeight) / 100;

            blog.scrollTo({top: offsetT_top - five_vh, behavior: 'smooth'});

        }


        //close
        else{

            thisElement.classList.remove('selected_flyer_desk')

            thisElement.style['border'] = 'none';
            thisElement.style['box-shadow'] = 'none';
            

            // moreInfo.style['display'] = 'none'
            moreInfo.classList.remove('moreInfo_desk_open')

            let offsetT_top = thisElement.offsetTop;
            let forty_vh = (40 * document.documentElement.clientHeight) / 100;

            blog.scrollTo({top: offsetT_top - forty_vh, behavior: 'smooth'});
        }


    }

    //ASSIGN LAST IN ROW
    function assign_last_in_row() {


        // clear old assignments
        for( flyer of flyers ){
            flyer.classList.remove('last_in_row');
        }

        // assign
        for (let i = 0; i < flyers.length; i++) 
        {
            
            if ( (i + 1) % (1 + 2) == 0){
                flyers[i].classList.add('last_in_row');}

        }
    }

    //FIND LAST IN ROW
    function find_last_in_row(element) {


        if (element.classList.contains('last_in_row')){
            return element
        
        }
        
        let last_element = find_last_in_row(element.nextElementSibling)

        return last_element
        // return element.nextSibling.nextSibling.nextSibling.nextSibling

    }
    function find_last_in_row_old(element) {


        if (element.classList.contains('last_in_row')){
            return element

        }

        let last_element = find_last_in_row(element.nextElementSibling)

        return last_element
        // return element.nextSibling.nextSibling.nextSibling.nextSibling

        }


//SET_moreInfo_toggle_type
function set_moreInfo_toggle_type(){

    let flyer_images = document.getElementsByClassName('flyer-img');

    // < 1001px - mobile
    if (window.innerWidth < 1001) {
            screen_size = "mobile"

            for (let i = 0; i < flyer_images.length; i++) 
            {
                flyer_images[i].setAttribute('onclick', 'toggleMoreInfo(this)');
            }

            return
        }

        // 1001px - 'N' px p laptop
        if(window.innerWidth >= 1001){
            screen_size = "laptop";

            for (let i = 0; i < flyer_images.length; i++) 
                {
                    flyer_images[i].setAttribute('onclick', 'toggle_moreInfo_desk(this)');
                }

            return
        }

}

//FETCH GEOCODE
"use strict";

function initMap() {
  const CONFIGURATION = {
    
    "mapsApiKey": "AIzaSyD8PojGK5wFPCE1Hzv3kQiEkKc2KaeFeP4",
    "capabilities": {"addressAutocompleteControl":true,"mapDisplayControl":false,"ctaControl":false}

  };

  const componentForm = [
    'location',
    
  ];

//   const getFormInputElement = (component) => document.getElementById(component + '-input');
//   const autocompleteInput = getFormInputElement('location');
  const autocomplete = new google.maps.places.Autocomplete(address_input, {
    fields: ["address_components", "geometry"],
    types: ["address"],
  });
  autocomplete.addListener('place_changed', function () {
    const place = autocomplete.getPlace();
    if (!place.geometry) {
      // User entered the name of a Place that was not suggested and
      // pressed the Enter key, or the Place Details request failed.
      window.alert('No details available for input: \'' + place.name + '\'');
      sortAddress_checkbox.style["background-color"] = "white";
      
      address_input.value = '';
      return;
    }

    fillInAddress(place);

    sortAddress_checkbox.style['background-color'] = 'black';
    console.log(place.geometry.location.toJSON());

    let USERS_LOCATION = place.geometry.location.toJSON()

    //asign distances
    for ( let flyer of flyers){
       
        //find distance
        let dist;

        let [lat1, lon1, lat2, lon2] = [USERS_LOCATION.lat, USERS_LOCATION.lng, flyer.dataset.latt, flyer.dataset.long]
        if ((lat1 == lat2) && (lon1 == lon2)) {
            dist = 0;
        }
        else {
            let radlat1 = Math.PI * lat1/180;
            let radlat2 = Math.PI * lat2/180;
            let theta = lon1-lon2;
            let radtheta = Math.PI * theta/180;
            dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
            if (dist > 1) {
                dist = 1;
            }

            dist = Math.acos(dist);
            dist = dist * 180/Math.PI;

            dist = dist * 60 * 1.1515;
            flyer.setAttribute('data-distance', dist.toFixed(2))
        }

        
    }

    //sort by distance
    let sorted = $('.flyer-div').sort(function(a, b) {return +a.dataset.distance - +b.dataset.distance;})
    
    //assign css order to flyer-div and moreInfo divs ALSO add mi to moreInfo distance_tag
    let orderCounter = 1;

    sorted.each(function( index, element ) {

        // $( this ).css( 'order', index );
        // $(`#more_info_${$(this).find(">:first-child").data('flyer_id')}`).css( 'order', index );

        element.style['order'] = (index + orderCounter);

        document.querySelector(`#more_info_${element.firstElementChild.dataset.flyer_id}`).style['order'] = (index + orderCounter) + 1;
        document.querySelector(`#more_info_${element.firstElementChild.dataset.flyer_id}`).querySelector('.distance_tag').innerText = element.dataset.distance + ' mi ';

        console.log( document.querySelector(`#more_info_${element.firstElementChild.dataset.flyer_id}`).querySelector('.distance_tag'));
        orderCounter ++;

        // console.log(index);
    
    });

    filter();

  });//end autocomplete call back

  function fillInAddress(place) {  // optional parameter
    const addressNameFormat = {
      'street_number': 'short_name',
      'route': 'long_name',
      'locality': 'long_name',
      'administrative_area_level_1': 'short_name',
      'country': 'long_name',
      'postal_code': 'short_name',
    };
    const getAddressComp = function (type) {
      for (const component of place.address_components) {
        if (component.types[0] === type) {
          return component[addressNameFormat[type]];
        }
      }
      return '';
    };
    address_input.value = getAddressComp('street_number') + ' '
              + getAddressComp('route');
    for (const component of componentForm) {
      // Location field is handled separately above as it has different logic.
    //   if (component !== 'location') {
    //     getFormInputElement(component).value = getAddressComp(component);
    //   }
    }
  }
}



// function fetchGeocode(){
    
//     if (event.keyCode === 13) // 'ENTER' key pressed
//     {
//         console.log(address_input.value);

//         // fetch('http://example.com/movies.json')

//         //     .then((response) => response.json())
//         //     .then((data) => console.log(data));
//     }
// }

    function onLoadFunction()
    {
        //show errors (if errors)
        //   console.log("{% if messages %}<ul >{% for message in messages %}<li{% if message.tags %} {% endif %}>{{ message }}</li>{% endfor %}</ul>{% endif %}")
        if("{% if messages %}<ul >{% for message in messages %}<li{% if message.tags %} {% endif %}>{{ message }}</li>{% endfor %}</ul>{% endif %}")
        {
            success_modal.style['display'] = 'block';
        }

        if(localStorage.getItem('current_user_email'))
        {
            current_user_email =localStorage.getItem('current_user_email');
            console.log(current_user_email);
        }
        else
        {
            current_user_email ='null';
        }

        //set line clamp size for event description div

        let root = document.documentElement;
        root.style.setProperty('--clampCount', String(10-7));

        set_moreInfo_toggle_type();
        // assign_last_in_row();
        format_layout_for_desk();

        // document.querySelector('#mobile-side-bar-inner').style['height'] = 100 -(
        //     document.querySelector('#boros').style['height'] + document.querySelector('#weekBar').style['height']);

        //set side-bar-mobile height
        document.querySelector('#mobile-side-bar-inner').style['max-height'] = `${(window.innerHeight - mobileLogoDiv.offsetHeight - boroBar.offsetHeight - weekBar.offsetHeight)}px`;
    
        console.log((window.innerHeight - mobileLogoDiv.offsetHeight - boroBar.offsetHeight - weekBar.offsetHeight));
    }


  </script>

  <style>
/* #mobile_top_buffer_div{
    transition: 1s;
} */
    @font-face {
    font-family: comicy;
    src: url({% static '/mainApp/ComicNeue-Bold.ttf' %});}

    html {
  scroll-behavior: smooth;}

      body{
    padding: 0;
    margin: 0;

    display: block !important;
  }
  #bodyDiv{
    display: flex;
    height: 100vh;
    width:100vw;
    /* overflow: hidden; */
  }
  .btn:focus {
        box-shadow: none !important;
      }

  /* ----------- leftPanel ----------- */
  #leftPanel{
    display: flex;
    flex-direction: column;
    max-height: 100vh;
    flex: 2.5;
    max-width:  29ch;
    /* background-color: white; */
  
  }

  #mainLogo{
    max-width: 100%;
    /* height: 100%; */

    padding-right: 5%;
  } 
    
    #border{
    align-self: center;
    width: 55%;
    border-bottom: 1px solid #F76F07;
    margin: 4%;
    padding-right: 5%;
}
  
#boroBar_left{
    /* background-color: #F76F07; */
    text-align: center;
    /* flex-wrap: wrap; */
    margin: 1%;
    padding: 1%;
    margin-bottom: 0%;
    user-select: none;
}
.borobtn_desk{
    border-radius: 25px;
    background-color: white;
    margin: 5px;
    border: 1px solid black;
    border-style: none;
    box-shadow: rgba(0, 0, 0, .2) 0 3px 5px -1px,rgba(0, 0, 0, .14) 0 6px 10px 0,rgba(0, 0, 0, .12) 0 1px 18px 0;
    padding: 0px 8px;
    user-select: none;
}

.borobtn_desk:hover {
  /* background: #eef1f5;
  color: #174ea6; */

  background-color: #eef1f5;
  opacity: 50;
}
.borobtn_desk:active {
  outline: 0 !important;
}
.borobtn_desk:focus {
  outline: 0 !important;
}

#boros_left .active {

  background-color: black;
  color: white;

  outline: 0 !important;
  user-select: none;
}


/* ---- */
.button-17 {
  align-items: center;
  appearance: none;
  background-color: #fff;
  border-radius: 24px;
  border-style: none;
  box-shadow: rgba(0, 0, 0, .2) 0 3px 5px -1px,rgba(0, 0, 0, .14) 0 6px 10px 0,rgba(0, 0, 0, .12) 0 1px 18px 0;
  box-sizing: border-box;
  color: #3c4043;
  cursor: pointer;
  display: inline-flex;
  fill: currentcolor;
  font-family: "Google Sans",Roboto,Arial,sans-serif;
  font-size: 14px;
  font-weight: 500;
  height: 48px;
  justify-content: center;
  letter-spacing: .25px;
  line-height: normal;
  max-width: 100%;
  overflow: visible;
  padding: 2px 24px;
  position: relative;
  text-align: center;
  text-transform: none;
  transition: box-shadow 280ms cubic-bezier(.4, 0, .2, 1),opacity 15ms linear 30ms,transform 270ms cubic-bezier(0, 0, .2, 1) 0ms;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  width: auto;
  will-change: transform,opacity;
  z-index: 0;
}

.button-17:hover {
  background: #F6F9FE;
  color: #174ea6;
}

.button-17:active {
  box-shadow: 0 4px 4px 0 rgb(60 64 67 / 30%), 0 8px 12px 6px rgb(60 64 67 / 15%);
  outline: none;
}

.button-17:focus {
  outline: none;
  border: 2px solid #4285f4;
}

.button-17:not(:disabled) {
  box-shadow: rgba(60, 64, 67, .3) 0 1px 3px 0, rgba(60, 64, 67, .15) 0 4px 8px 3px;
}

.button-17:not(:disabled):hover {
  box-shadow: rgba(60, 64, 67, .3) 0 2px 3px 0, rgba(60, 64, 67, .15) 0 6px 10px 4px;
}

.button-17:not(:disabled):focus {
  box-shadow: rgba(60, 64, 67, .3) 0 1px 3px 0, rgba(60, 64, 67, .15) 0 4px 8px 3px;
}

.button-17:not(:disabled):active {
  box-shadow: rgba(60, 64, 67, .3) 0 4px 4px 0, rgba(60, 64, 67, .15) 0 8px 12px 6px;
}

.button-17:disabled {
  box-shadow: rgba(60, 64, 67, .3) 0 1px 3px 0, rgba(60, 64, 67, .15) 0 4px 8px 3px;
}
.boro_topRow{
    margin-bottom: 5px;
}

#a{
  background-color: #F76F07;
  display: none;
}
#weekBar_left{
    background-color:rgb(60, 68, 75);
    /* height:5%; */
    border: 1px solid;
    box-shadow: 5px 10px 20px black inset;
    padding:.2%;
    text-align: center;
    margin: 1%;
    
    margin-top: 0%;
    /* min-height: 0; */
}
#weekBar_desk{
    text-align: center;
    margin-top: 4%;
    margin-bottom: 4%;
    user-select: none;
}
.weekbtn_desk{
    /* border-radius: 5px; */
    background-color: white;
    /* margin: 5px; */
    border: 1px solid black;
    border-style: none;
    /* box-shadow: rgba(0, 0, 0, .2) 0 3px 5px -1px,rgba(0, 0, 0, .14) 0 6px 10px 0,rgba(0, 0, 0, .12) 0 1px 18px 0; */
    /* padding: 0px 8px; */
    user-select: none;
}
.weekbtn_desk:hover{
    background-color: #eef1f5;
    opacity: 50;
}
.weekbtn_desk:active {
  outline: 0 !important;
}
.weekbtn_desk:focus {
  outline: 0 !important;
}
#weekBar_desk .active{
  background-color: black;
  color: white;

  outline: 0 !important;
  user-select: none;
}
#filterBarDesk{
    display:flex;
    flex-direction: column;
    overflow-x: scroll;
    cursor: pointer;
    scroll-behavior: smooth;
    flex-grow: 1;
    
}
    #filter-options-Desktop{
        margin-top: 4%;
        margin-left: 25%;

        


    }

            .filter_text_desk{
                color:white;
                display: inline-block;

                padding: 4%;
                font-weight: bold;
                font-size: 19px;
                /* text-shadow: #000 0px 0px 1px,   #000 0px 0px 1px,   #000 0px 0px 1px,
                            #000 0px 0px 1px,   #000 0px 0px 1px,   #000 0px 0px 1px; */
                            /* text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000; */
                            /* text-shadow:-1px -1px 0 #000,
                                        0   -1px 0 #000,
                                        1px -1px 0 #000,
                                        1px  0   0 #000,
                                        1px  1px 0 #000,
                                        0    1px 0 #000,
                                        -1px  1px 0 #000,
                                        -1px  0   0 #000; */
                                        /* text-shadow:
                                                    -1px -1px 0 black,
                                                    0px -1px 0 black,
                                                    1px -1px 0 black,
                                                    -1px 1px 0 black,
                                                    0px 1px 0 black,
                                                    1px 1px 0 black; */
                                                    /* text-shadow:
                                                        3px 3px 0 #000,
                                                        -1px -1px 0 #000,  
                                                        1px -1px 0 #000,
                                                        -1px 1px 0 #000,
                                                        1px 1px 0 #000; */

                /* -webkit-font-smoothing: antialiased; */
                --stroke-color:black;
  --stroke-width:1.5px;
text-shadow: calc(var(--stroke-width) * 1) calc(var(--stroke-width) * 0) 0
      var(--stroke-color),
    calc(var(--stroke-width) * 0.9239) calc(var(--stroke-width) * 0.3827) 0
      var(--stroke-color),
    calc(var(--stroke-width) * 0.7071) calc(var(--stroke-width) * 0.7071) 0
      var(--stroke-color),
    calc(var(--stroke-width) * 0.3827) calc(var(--stroke-width) * 0.9239) 0
      var(--stroke-color),
    calc(var(--stroke-width) * 0) calc(var(--stroke-width) * 1) 0
      var(--stroke-color),
    calc(var(--stroke-width) * -0.3827) calc(var(--stroke-width) * 0.9239) 0
      var(--stroke-color),
    calc(var(--stroke-width) * -0.7071) calc(var(--stroke-width) * 0.7071) 0
      var(--stroke-color),
    calc(var(--stroke-width) * -0.9239) calc(var(--stroke-width) * 0.3827) 0
      var(--stroke-color),
    calc(var(--stroke-width) * -1) calc(var(--stroke-width) * 0) 0
      var(--stroke-color),
    calc(var(--stroke-width) * -0.9239) calc(var(--stroke-width) * -0.3827) 0
      var(--stroke-color),
    calc(var(--stroke-width) * -0.7071) calc(var(--stroke-width) * -0.7071) 0
      var(--stroke-color),
    calc(var(--stroke-width) * -0.3827) calc(var(--stroke-width) * -0.9239) 0
      var(--stroke-color),
    calc(var(--stroke-width) * 0) calc(var(--stroke-width) * -1) 0
      var(--stroke-color),
    calc(var(--stroke-width) * 0.3827) calc(var(--stroke-width) * -0.9239) 0
      var(--stroke-color),
    calc(var(--stroke-width) * 0.7071) calc(var(--stroke-width) * -0.7071) 0
      var(--stroke-color),
    calc(var(--stroke-width) * 0.9239) calc(var(--stroke-width) * -0.3827) 0
      var(--stroke-color);

      white-space: nowrap;

            }
            .filter_text{
                
                color:white;
                font-size: 135%;
                font-weight: bold;
                text-shadow:1px 1px 1px black,
                        4px  1px 0 rgba(0,0,0,0.7),
                        3px  2px 0 rgba(0,0,0,0.7),
                        3px  3px 0 rgba(0,0,0,0.7),
                        2px  3px 0 rgba(0,0,0,0.7),
                        1px  4px 0 rgba(0,0,0,0.7),

                        0px  4px 0 rgba(0,0,0,0.7),
                    -1px  4px 0 rgba(0,0,0,0.7),
                    -2px  3px 0 rgba(0,0,0,0.7),
                    -3px  3px 0 rgba(0,0,0,0.7),
                    -3px  2px 0 rgba(0,0,0,0.7),
                    -4px  1px 0 rgba(0,0,0,0.7),

                    -4px  0px 0 rgba(0,0,0,0.7),
                    -4px -1px 0 rgba(0,0,0,0.7),
                    -3px -2px 0 rgba(0,0,0,0.7),
                    -3px -3px 0 rgba(0,0,0,0.7),
                    -2px -3px 0 rgba(0,0,0,0.7),
                    -1px -4px 0 rgba(0,0,0,0.7),

                        0px -4px 0 rgba(0,0,0,0.7),
                        1px -4px 0 rgba(0,0,0,0.7),
                        2px -3px 0 rgba(0,0,0,0.7),
                        3px -3px 0 rgba(0,0,0,0.7),
                        3px -2px 0 rgba(0,0,0,0.7),
                        4px -1px 0 rgba(0,0,0,0.7);
                margin: 0;
                padding:4%;
                display: inline-block;
                /* cursor: pointer; */
                white-space: nowrap;
            }
            .check_box{
            
            display: inline-block;
            border: 1.5px solid black;
            /* padding: 0%; */
            font-size: 50%;
            cursor: pointer;
            transform: translateY(-2.9px);
            }
            .expand_symbol{
            
            display: inline-block;
            /* border-style: solid; */
            /* padding: 0%; */
            font-size: 200%;
            width: 15px;
            transform: translateX(-4px);
            cursor: pointer;
            }
            #clear_all_symbol{
            font-size: 150%;
            font-weight: bold;
            cursor: pointer;
            transform: scale(1, 7);

            }
            .showAll_button{
                transform: translateX(-10px);
            }
            .refresh_symbol{

                width: 1.4rem;
                /* height: 1.4rem; */
                
                transform: translateY(-2.9px);
            }
            .refresh_symbol_desk{
                width: 19.9px;
                transform: translateY(-2.5px);

                margin-top: 2;
                
            }

    #buttonsBottom{

    display: flex;
    flex-direction: column;
    /* padding: 2%; */
    padding-left: 2%;
    padding-right: 2%;
    /* position: fixed; */
    /* bottom: 0; */
    
    /* position: absolute;  */
    /* width: 100%; */
    /* bottom: 5;  */
    
    }
                /* .bottomButtonDesk{
                    
                } */
/* Custom Checkboxes */
/* https://codepen.io/elujambio/pen/rKKLbx */


  /* ---------- mainPanel ----------- */
  #mainPanel{
      flex: 7.5;
      display: flex;
      flex-direction: column;
  }
  
  #mobileLogoDiv{
      /* display: none; */
      width: auto;
      max-height: 7vh;
      /* height: auto; */
      /* background-color: #c4ff61; */
      
      
  }
  #mobileLogo{

    /* max-width: 100%; */
    max-height: 6.5vh;
    display: block;
    margin-left: auto;
    margin-right: auto 
  }
  
  #boroBar{
      background-color: #F76F07;
      /* background-color: #c4ff61; */
      
      
  }

    #boros{
        text-align: center; }

        .lastBoro::after{
            content: "";
            width: 48px;

        }
  /* #boros .btn{
      font-size: smaller;
  } */

  
  /* #blogDiv{ */
      /* display: flex; */
      /* flex-direction: column; */
      /* height: 100%; */
      /* height: 92vh; */
      /* background-color: rgb(22, 28, 23); */
      /* max-height: 100%;
       */
      /* min-height: 0; keeps blogDiv from overflowing parent.(flexbox bug) */
      /* padding: 0;
      margin: 0; */
      /* overflow-x: hidden;  */
    /* } */
  
  #weekBar{
    
      background-color:rgb(60, 68, 75);
      /* height:5%; */
      border: 1px solid;
      box-shadow: 5px 10px 20px black inset;
      padding:.2%;
      text-align: center;
      /* min-height: 0; */
  }
  #weekBar .weekday_button{
      border-radius: 50%;
      /* margin-left: 1%; */
    }

    #blog{
        scroll-behavior: smooth;
      /* height: 92vh; */
      /* background-color: #009493; */
      /* background-color: #12E0DF; */
      /* background-color: #1B944F; */
      /* background-color: #943A06; */
      /* background-color: #1B5594; */
      /* background-color: #076FE0;  */
      /* background-color: #7A633B; */
      /* background-color: #612808; */
      /* background-color: #613B25; */
      /* background-color: #612808; */
      /* background-color: #393D41; */
      background-color: #252629;
  
      /* text-align: center; */
      /* align-items: center; */
      overflow: scroll;
      overflow-x: hidden; 
      /* line-height: 10x; space between posts */

      display: flex;
      flex-direction: column;

      flex: 1;

      height: 100%;
      padding-bottom: 19vh;

    }
    /* #blog-inner{
        display: inline-block;
    } */

    #side-bar-mobile{
        position: fixed;
        background-color: #f5f5f5;
        padding-left: 0px;
        width: 0px;
        /* height: 100%; */
        /* margin-top: 5%;
        margin-left: 25%; */
        transition: 0.4s;
        z-index: 2;
        /* display: flex; */ 
    }

        #mobile-side-bar-inner{
        display: flex;
        flex-direction: column;
        /* height: 80vh; */
        /* height: 100%; */
        justify-content: space-between;
        /* background-color: brown; */
        /* padding-bottom: 60%; */
        }

            #mobile-sort-div{
                
                padding-left: 25%;
            }
                .sortOption{
                    display: inline-block;
                    font-weight: bolder;
                }
                #address_input{
                    width: 80%;
                }

            #filter-options-mobile{
                /* margin-top: 10%; */
                overflow-x:scroll;
                flex-grow: 1;
                /* margin-bottom: auto; */
            }
            li{
            list-style-type: none;
            }
            .nest{
            display: none;
            }
            #filterButton{

                position: relative;
                top: 1%;
                /* left: 2px; */
                /* right:105%; */
                font-weight: bold;
                /* border: #eef1f5 solid .5px; */
                /* box-shadow: inset 0px 0px 1px #f5f5f5; */
            }
            #filterButton:focus {

                background-color: #343a40;
                border-color: #343a40;
            }

            #blank-space{
                flex-grow: 1;
            }

            #buttonsBottomLeft{
            
            display: none;
            flex-direction: column;
            padding: 5%;
            transform: translateY(-10px);
            
            }
            .bottomLeftButton{
            margin: 1%;
            }
    .fa-bars{
        color:white;
    }
 
    .no_results_text{
        margin-top: 5%;
        color:seashell;
        text-align: center;
        font-style: italic;
        font-weight: bold;
        font-size: 150%;
        padding-bottom: 80vh;
    }

    .flyer-div
    {
      /* height: 95%;
      width:fit-content; */
      min-width: 80vw;
      width: 80vw;
      /* min-width: 24vw; */
      /* max-width: 26vw; */
      /* height: auto; */
      margin-left: auto;
      margin-right: auto;

      margin-top:1%;
      display: flex;
      /* margin-left: auto;
margin-right: auto; */
  /* position: relative; */
    
    }

    .flyer-img{
      /* width: 80%; */
      /* height: 100%; */
      /* min-width: 25vw; */
      width: 100%;
      min-width: 80vw;
      /* width: 299px; */
      /* height: 400px; */
      /* object-fit:fill; */
      /* object-fit: contain; */
      /* margin-left: 10%; */
      /* margin-right: 10%; */
      /* margin-bottom: 1em; */
      /* margin:1em; */
      /* display: block; */
      z-index: 1;
      
      
    }
    .flyer-buttons{
      
      align-self: flex-end;
      /* font-size: 200%; */
      /* position: absolute; */
      /* bottom: 8px; */
      /* right: 2%; */
      margin-right: auto;
      margin-left: 1%;
      color: aliceblue;
    }
        .dropdown-menu{
            /* background-color: rgb(60, 68, 75); */
            background-color: rgb(40, 44, 49);;
        }

        .dropdown-item{
            background-color:rgb(40, 44, 49);
            color: rgb(249,247,249);
        }
        .dropdown-item:hover{
            background-color: rgb(23,25,27);
            color: rgb(249,247,249);
        }

        .moreInfo
      {
        height: 0px;
        /* width: 80vw;
        margin-left: auto;
        margin-right: auto; */
        margin-top:1%;
        display: flex;
        flex-direction: column;
        color:rgb(249,247,249);
        /* font-size: 80%; */
        font-size: smaller;
        align-items: center;
        transition: 0.4s;
        position: relative;
        bottom: 15%;
        /* z-index: 0; */
      }
      .moreInfo>*{
          margin: 0px;
          /* display: none; */
          /* height: 0px; */
          transition: 0.4s;
          
          /* display:inline-block */
      }

      .user_info{
          /* padding: 2%; */
          background-color: rgb(249,247,249);
          /* width:45vw; */
          border-radius: 4px;
          color: black;
          padding: 0px;
          padding-left: 20%;
          padding-right: 20%;
          height: 0px;
          
          overflow: hidden;
          /* overflow-x: scroll; */

          /*-ms-overflow-style: none;*/  /* IE and Edge */
          /*scrollbar-width: none;*/  /* Firefox */
      }
        
            .user_info::-webkit-scrollbar {
                display: none;}

    
    .link{
        color: #007bff;
        text-decoration: none;
    }
    .tag_div{

        font-family: comicy;
        font-size: .8rem;

        display: flex;
        gap: 1ch;
    }
        .type_tag{color: #F76F07;}
        .boro_tag{color: #1a6e05;}

    .event_description
    {
        margin-top: .4rem;
        margin-bottom: 1rem;
/* 
        color: #0b0e07; */

        /* text-overflow: ellipsis; */
        overflow: hidden;
        height: 4rem;
        display: -webkit-box;
        -webkit-line-clamp: var(--clampCount); /*clampCount defined in onLoad function*/
        -webkit-box-orient: vertical;  
 
    }

    .scroll_behind_padding{
        white-space:nowrap;
        overflow: scroll;
    }
    .scroll_behind_padding::-webkit-scrollbar {
        display: none;
    }

    .moreInfo_desk
    {

        display: none; 
    }

    .moreInfo_desk_open{
            
        display: flex;
        height: 90vh;
        width: 95%;
        margin-top: 1%;
        /* background-color: #007bff; */
        border-top: aliceblue solid 5px;
        border-bottom:  aliceblue solid 5px;
        position: relative;

        }

        .moreInfo_desk_close_text{
            color: #174ea6;
            position:absolute;
            right: 0px;
            margin-right: 1rem;
            top: .4rem;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .moreInfo_desk_img_div{

            flex: 1;
            display: flex;

           justify-content: center;
           align-items: center;

        }
            .moreInfo_desk_img{
                max-width:95%;
                max-height:95%;
            }

        .moreInfo_desk_text_div{
            flex: 1;

            display: flex;
            flex-direction: column;

            align-items: center;
            justify-content: center;

            /* background-color: #174ea6; */
            gap: .7rem;
        }

            .moreInfo_desk_userInfo{
                background-color: rgb(249,247,249);
                width: 85%;
                max-width:350px;
                border-radius: 4px;
                color: black;
                /* color: #174ea6; */
                padding: .6rem;
                /* padding-left: 20%;
                padding-right: 20%; */
                height: 74%;
                max-height: 500px;
                display: flex;
                flex-direction: column;
            }
                .tag_div_desk{
                    font-family: comicy;
                    /* font-size: .8rem; */
                }
                .event_description_desk
                {
                    margin-top: .4rem;
                    margin-bottom: auto;
            
                }

            .moreInfo_desk_address{
                background-color: rgb(249,247,249);
                width:85%;
                max-width:350px;
                border-radius: 4px;
                color: black;
                padding: .5rem;
            }

    .newPostIcon{
        color: yellow;
        position: fixed;
        bottom: 2%;
        right: 5%;
    }

    #emailModalText{
        font-size: 78%;
    }

    #success_modal{
        background-color: white;
        width: 90vw;
        height: auto;
        padding: 5%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2;
        font-size: 70%;
        border: 1px solid black;
        line-height: 1.8;;
    }
        #modal_line{
            width: 55%;
            border-bottom: 1px solid #F76F07;
            margin: auto;
            padding-top: 1%;
            padding-right: 5%;
            margin-bottom: 4%;
        }
        #success_modal_btn{
            /* box-shadow:inset 0px -3px 7px 0px #29bbff; */
            /* background:linear-gradient(to bottom, #2dabf9 5%, #0688fa 100%); */
            background: #F76F07;
            /* background-color:#F76F07; */
            border-radius:1px;
            border:1px solid #0b0e07;
            display:inline-block;
            cursor:pointer;
            color:#ffffff;
            font-family:Arial;
            font-size:15px;
            padding:9px 23px;
            text-decoration:none;
            text-shadow:0px 1px 0px #263666;
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-top: 2%;
        }

        .buffer_animation{
            animation-name: buffer_animation;
            animation-duration: .4s;
        }
        @keyframes buffer_animation {
            0%, 100% {height: 0px;}
            50% {height: 2px;}
            }
  
  
@media only screen and (max-width: 1298px) {


}

@media only screen and (min-width: 601px){

#blog{

display: flex;
flex-wrap: wrap;

flex-direction: row;

justify-content: center;
padding-bottom: 50vh;

}

.flyer-div{
    margin-left:auto;
    margin-right:1%;

     /* height: 350px; */
    height: auto;

    min-width:350px;
    width:350px;
}
.flyer-img{
     /* height: 350px; */
    height:auto;

    min-width:350px;
    width:350px;
}

#side-bar-mobile {

        left: 8px;

    }
}
@media only screen and (min-width: 712px) {
.flyer-div{
        margin-left:.5rem;
}
       /* main panel */

       #mobileLogoDiv{
    display: none;
    }
    #boroBar{
    display: none;
    }
    #weekBar{
      display: none;
    }
    #side-bar-mobile{
      display: none;
    }


}

@media only screen and (max-width: 712px) {
    #boroBar_left{
        background-color:yellowgreen;
    }
    #leftPanel{
        display: none;
    }
    #mainPanel{
      flex: 1;
    }
    .flyer-div
  {
    height: auto;
    min-width:80vw;
    /* margin-left: auto;
    margin-right: auto;
    margin-top:1%;

    display: flex; */

    /* margin-left: auto;
  margin-right: auto; */
  /* position: relative; */
  }


.flyer-buttons{
font-size: 4.8vw;
/* width: 7vw; */
}

.user_info{
width: 80vw;}


}


@media only screen and (min-width: 1010px) {



    #success_modal{
        /* height: 46vh; */
        width: 40vw;
        padding: 2%;
        font-size: 95%;
    }

    #blog{
        padding-top: 160px;}

    .moreInfo{
        width: 0px;;
    }

    .flyer-buttons{
        display: none;
    }

}
    
  </style>

     
  
  <!-- Your flyer was successflly Posted!  
  If you dont see your flyer its because cafe burner only displays flyers for the upcoming weekend.
  So if your event is taking place after this upcoming weekend, you wont see your flyer untill then.
  Any questions? contact support@grepper.com -->